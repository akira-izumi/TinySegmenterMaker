% TinySegmenter 0.1 -- Super compact Japanese tokenizer in Javascript
% (c) 2012 Shogo Ichinose <shogo82148@gmail.com>
% TinySegmenter is freely distributable under the terms of MIT licence.

% the type of characters
\def\tseg@ctype@一{M}
\def\tseg@ctype@二{M}
\def\tseg@ctype@三{M}
\def\tseg@ctype@四{M}
\def\tseg@ctype@五{M}
\def\tseg@ctype@六{M}
\def\tseg@ctype@七{M}
\def\tseg@ctype@八{M}
\def\tseg@ctype@九{M}
\def\tseg@ctype@十{M}
\def\tseg@ctype@百{M}
\def\tseg@ctype@千{M}
\def\tseg@ctype@万{M}
\def\tseg@ctype@億{M}
\def\tseg@ctype@兆{M}
\def\tseg@ctype@あ{I}
\def\tseg@ctype@い{I}
\def\tseg@ctype@う{I}
\def\tseg@ctype@え{I}
\def\tseg@ctype@お{I}
\def\tseg@ctype@か{I}
\def\tseg@ctype@き{I}
\def\tseg@ctype@く{I}
\def\tseg@ctype@け{I}
\def\tseg@ctype@こ{I}
\def\tseg@ctype@が{I}
\def\tseg@ctype@ぎ{I}
\def\tseg@ctype@ぐ{I}
\def\tseg@ctype@げ{I}
\def\tseg@ctype@ご{I}
\def\tseg@ctype@さ{I}
\def\tseg@ctype@し{I}
\def\tseg@ctype@す{I}
\def\tseg@ctype@せ{I}
\def\tseg@ctype@そ{I}
\def\tseg@ctype@ざ{I}
\def\tseg@ctype@じ{I}
\def\tseg@ctype@ず{I}
\def\tseg@ctype@ぜ{I}
\def\tseg@ctype@ぞ{I}
\def\tseg@ctype@た{I}
\def\tseg@ctype@ち{I}
\def\tseg@ctype@つ{I}
\def\tseg@ctype@て{I}
\def\tseg@ctype@と{I}
\def\tseg@ctype@だ{I}
\def\tseg@ctype@ぢ{I}
\def\tseg@ctype@づ{I}
\def\tseg@ctype@で{I}
\def\tseg@ctype@ど{I}
\def\tseg@ctype@な{I}
\def\tseg@ctype@に{I}
\def\tseg@ctype@ぬ{I}
\def\tseg@ctype@ね{I}
\def\tseg@ctype@の{I}
\def\tseg@ctype@は{I}
\def\tseg@ctype@ひ{I}
\def\tseg@ctype@ふ{I}
\def\tseg@ctype@へ{I}
\def\tseg@ctype@ほ{I}
\def\tseg@ctype@ば{I}
\def\tseg@ctype@び{I}
\def\tseg@ctype@ぶ{I}
\def\tseg@ctype@べ{I}
\def\tseg@ctype@ぼ{I}
\def\tseg@ctype@ぱ{I}
\def\tseg@ctype@ぴ{I}
\def\tseg@ctype@ぷ{I}
\def\tseg@ctype@ぺ{I}
\def\tseg@ctype@ぽ{I}
\def\tseg@ctype@ま{I}
\def\tseg@ctype@み{I}
\def\tseg@ctype@む{I}
\def\tseg@ctype@め{I}
\def\tseg@ctype@も{I}
\def\tseg@ctype@や{I}
\def\tseg@ctype@ゐ{I}
\def\tseg@ctype@ゆ{I}
\def\tseg@ctype@ゑ{I}
\def\tseg@ctype@よ{I}
\def\tseg@ctype@ら{I}
\def\tseg@ctype@り{I}
\def\tseg@ctype@る{I}
\def\tseg@ctype@れ{I}
\def\tseg@ctype@ろ{I}
\def\tseg@ctype@わ{I}
\def\tseg@ctype@を{I}
\def\tseg@ctype@ん{I}
\def\tseg@ctype@ぁ{I}
\def\tseg@ctype@ぃ{I}
\def\tseg@ctype@ぅ{I}
\def\tseg@ctype@ぇ{I}
\def\tseg@ctype@ぉ{I}
\def\tseg@ctype@ゎ{I}
\def\tseg@ctype@っ{I}
\def\tseg@ctype@ア{K}
\def\tseg@ctype@イ{K}
\def\tseg@ctype@ウ{K}
\def\tseg@ctype@エ{K}
\def\tseg@ctype@オ{K}
\def\tseg@ctype@カ{K}
\def\tseg@ctype@キ{K}
\def\tseg@ctype@ク{K}
\def\tseg@ctype@ケ{K}
\def\tseg@ctype@コ{K}
\def\tseg@ctype@ガ{K}
\def\tseg@ctype@ギ{K}
\def\tseg@ctype@グ{K}
\def\tseg@ctype@ゲ{K}
\def\tseg@ctype@ゴ{K}
\def\tseg@ctype@サ{K}
\def\tseg@ctype@シ{K}
\def\tseg@ctype@ス{K}
\def\tseg@ctype@セ{K}
\def\tseg@ctype@ソ{K}
\def\tseg@ctype@ザ{K}
\def\tseg@ctype@ジ{K}
\def\tseg@ctype@ズ{K}
\def\tseg@ctype@ゼ{K}
\def\tseg@ctype@ゾ{K}
\def\tseg@ctype@タ{K}
\def\tseg@ctype@チ{K}
\def\tseg@ctype@ツ{K}
\def\tseg@ctype@テ{K}
\def\tseg@ctype@ト{K}
\def\tseg@ctype@ダ{K}
\def\tseg@ctype@ヂ{K}
\def\tseg@ctype@ヅ{K}
\def\tseg@ctype@デ{K}
\def\tseg@ctype@ド{K}
\def\tseg@ctype@ナ{K}
\def\tseg@ctype@ニ{K}
\def\tseg@ctype@ヌ{K}
\def\tseg@ctype@ネ{K}
\def\tseg@ctype@ノ{K}
\def\tseg@ctype@ハ{K}
\def\tseg@ctype@ヒ{K}
\def\tseg@ctype@フ{K}
\def\tseg@ctype@ヘ{K}
\def\tseg@ctype@ホ{K}
\def\tseg@ctype@バ{K}
\def\tseg@ctype@ビ{K}
\def\tseg@ctype@ブ{K}
\def\tseg@ctype@ベ{K}
\def\tseg@ctype@ボ{K}
\def\tseg@ctype@パ{K}
\def\tseg@ctype@ピ{K}
\def\tseg@ctype@プ{K}
\def\tseg@ctype@ペ{K}
\def\tseg@ctype@ポ{K}
\def\tseg@ctype@マ{K}
\def\tseg@ctype@ミ{K}
\def\tseg@ctype@ム{K}
\def\tseg@ctype@メ{K}
\def\tseg@ctype@モ{K}
\def\tseg@ctype@ヤ{K}
\def\tseg@ctype@ヰ{K}
\def\tseg@ctype@ユ{K}
\def\tseg@ctype@ヱ{K}
\def\tseg@ctype@ヨ{K}
\def\tseg@ctype@ラ{K}
\def\tseg@ctype@リ{K}
\def\tseg@ctype@ル{K}
\def\tseg@ctype@レ{K}
\def\tseg@ctype@ロ{K}
\def\tseg@ctype@ワ{K}
\def\tseg@ctype@ヲ{K}
\def\tseg@ctype@ン{K}
\def\tseg@ctype@ァ{K}
\def\tseg@ctype@ィ{K}
\def\tseg@ctype@ゥ{K}
\def\tseg@ctype@ェ{K}
\def\tseg@ctype@ォ{K}
\def\tseg@ctype@ヮ{K}
\def\tseg@ctype@ヴ{K}
\def\tseg@ctype@ー{K}
\def\tseg@ctype@ッ{K}
\def\tseg@ctype@ｱ{K}
\def\tseg@ctype@ｲ{K}
\def\tseg@ctype@ｳ{K}
\def\tseg@ctype@ｴ{K}
\def\tseg@ctype@ｵ{K}
\def\tseg@ctype@ｶ{K}
\def\tseg@ctype@ｷ{K}
\def\tseg@ctype@ｸ{K}
\def\tseg@ctype@ｹ{K}
\def\tseg@ctype@ｺ{K}
\def\tseg@ctype@ｻ{K}
\def\tseg@ctype@ｼ{K}
\def\tseg@ctype@ｽ{K}
\def\tseg@ctype@ｾ{K}
\def\tseg@ctype@ｿ{K}
\def\tseg@ctype@ﾀ{K}
\def\tseg@ctype@ﾁ{K}
\def\tseg@ctype@ﾂ{K}
\def\tseg@ctype@ﾃ{K}
\def\tseg@ctype@ﾄ{K}
\def\tseg@ctype@ﾅ{K}
\def\tseg@ctype@ﾆ{K}
\def\tseg@ctype@ﾇ{K}
\def\tseg@ctype@ﾈ{K}
\def\tseg@ctype@ﾉ{K}
\def\tseg@ctype@ﾊ{K}
\def\tseg@ctype@ﾋ{K}
\def\tseg@ctype@ﾌ{K}
\def\tseg@ctype@ﾍ{K}
\def\tseg@ctype@ｵ{K}
\def\tseg@ctype@ﾏ{K}
\def\tseg@ctype@ﾐ{K}
\def\tseg@ctype@ﾑ{K}
\def\tseg@ctype@ﾒ{K}
\def\tseg@ctype@ﾓ{K}
\def\tseg@ctype@ﾔ{K}
\def\tseg@ctype@ﾕ{K}
\def\tseg@ctype@ﾖ{K}
\def\tseg@ctype@ﾗ{K}
\def\tseg@ctype@ﾘ{K}
\def\tseg@ctype@ﾙ{K}
\def\tseg@ctype@ﾚ{K}
\def\tseg@ctype@ﾛ{K}
\def\tseg@ctype@ﾜ{K}
\def\tseg@ctype@ｵ{K}
\def\tseg@ctype@ﾝ{K}
\def\tseg@ctype@ﾞ{K}
\def\tseg@ctype@ﾟ{K}
\def\tseg@ctype@ｰ{K}
\def\tseg@ctype@ｯ{K}
\def\tseg@ctype@a{A}
\def\tseg@ctype@b{A}
\def\tseg@ctype@c{A}
\def\tseg@ctype@d{A}
\def\tseg@ctype@e{A}
\def\tseg@ctype@f{A}
\def\tseg@ctype@g{A}
\def\tseg@ctype@h{A}
\def\tseg@ctype@i{A}
\def\tseg@ctype@j{A}
\def\tseg@ctype@k{A}
\def\tseg@ctype@l{A}
\def\tseg@ctype@m{A}
\def\tseg@ctype@n{A}
\def\tseg@ctype@o{A}
\def\tseg@ctype@p{A}
\def\tseg@ctype@q{A}
\def\tseg@ctype@r{A}
\def\tseg@ctype@s{A}
\def\tseg@ctype@t{A}
\def\tseg@ctype@u{A}
\def\tseg@ctype@v{A}
\def\tseg@ctype@w{A}
\def\tseg@ctype@x{A}
\def\tseg@ctype@y{A}
\def\tseg@ctype@z{A}
\def\tseg@ctype@A{A}
\def\tseg@ctype@B{A}
\def\tseg@ctype@C{A}
\def\tseg@ctype@D{A}
\def\tseg@ctype@E{A}
\def\tseg@ctype@F{A}
\def\tseg@ctype@G{A}
\def\tseg@ctype@H{A}
\def\tseg@ctype@I{A}
\def\tseg@ctype@J{A}
\def\tseg@ctype@K{A}
\def\tseg@ctype@L{A}
\def\tseg@ctype@M{A}
\def\tseg@ctype@N{A}
\def\tseg@ctype@O{A}
\def\tseg@ctype@P{A}
\def\tseg@ctype@Q{A}
\def\tseg@ctype@R{A}
\def\tseg@ctype@S{A}
\def\tseg@ctype@T{A}
\def\tseg@ctype@U{A}
\def\tseg@ctype@V{A}
\def\tseg@ctype@W{A}
\def\tseg@ctype@X{A}
\def\tseg@ctype@Y{A}
\def\tseg@ctype@Z{A}
\def\tseg@ctype@ａ{A}
\def\tseg@ctype@ｂ{A}
\def\tseg@ctype@ｃ{A}
\def\tseg@ctype@ｄ{A}
\def\tseg@ctype@ｅ{A}
\def\tseg@ctype@ｆ{A}
\def\tseg@ctype@ｇ{A}
\def\tseg@ctype@ｈ{A}
\def\tseg@ctype@ｉ{A}
\def\tseg@ctype@ｊ{A}
\def\tseg@ctype@ｋ{A}
\def\tseg@ctype@ｌ{A}
\def\tseg@ctype@ｍ{A}
\def\tseg@ctype@ｎ{A}
\def\tseg@ctype@ｏ{A}
\def\tseg@ctype@ｐ{A}
\def\tseg@ctype@ｑ{A}
\def\tseg@ctype@ｒ{A}
\def\tseg@ctype@ｓ{A}
\def\tseg@ctype@ｔ{A}
\def\tseg@ctype@ｕ{A}
\def\tseg@ctype@ｖ{A}
\def\tseg@ctype@ｗ{A}
\def\tseg@ctype@ｘ{A}
\def\tseg@ctype@ｙ{A}
\def\tseg@ctype@ｚ{A}
\def\tseg@ctype@Ａ{A}
\def\tseg@ctype@Ｂ{A}
\def\tseg@ctype@Ｃ{A}
\def\tseg@ctype@Ｄ{A}
\def\tseg@ctype@Ｅ{A}
\def\tseg@ctype@Ｆ{A}
\def\tseg@ctype@Ｇ{A}
\def\tseg@ctype@Ｈ{A}
\def\tseg@ctype@Ｉ{A}
\def\tseg@ctype@Ｊ{A}
\def\tseg@ctype@Ｋ{A}
\def\tseg@ctype@Ｌ{A}
\def\tseg@ctype@Ｍ{A}
\def\tseg@ctype@Ｎ{A}
\def\tseg@ctype@Ｏ{A}
\def\tseg@ctype@Ｐ{A}
\def\tseg@ctype@Ｑ{A}
\def\tseg@ctype@Ｒ{A}
\def\tseg@ctype@Ｓ{A}
\def\tseg@ctype@Ｔ{A}
\def\tseg@ctype@Ｕ{A}
\def\tseg@ctype@Ｖ{A}
\def\tseg@ctype@Ｗ{A}
\def\tseg@ctype@Ｘ{A}
\def\tseg@ctype@Ｙ{A}
\def\tseg@ctype@Ｚ{A}
\def\tseg@ctype@０{N}
\def\tseg@ctype@１{N}
\def\tseg@ctype@２{N}
\def\tseg@ctype@３{N}
\def\tseg@ctype@４{N}
\def\tseg@ctype@５{N}
\def\tseg@ctype@６{N}
\def\tseg@ctype@７{N}
\def\tseg@ctype@８{N}
\def\tseg@ctype@９{N}
\def\tseg@ctype@Bi{O}
\def\tseg@ctype@Bii{O}
\def\tseg@ctype@Biii{O}
\def\tseg@ctype@Ei{O}
\def\tseg@ctype@Eii{O}
\def\tseg@ctype@Eiii{O}
\def\tseg@num@{0}
\def\tseg@num@i{1}
\def\tseg@num@ii{2}
\def\tseg@num@iii{3}
\def\tseg@num@iv{4}
\def\tseg@num@v{5}
\def\tseg@num@vi{6}
\def\tseg@num@vii{7}
\def\tseg@num@viii{8}
\def\tseg@num@ix{9}

\def\tseg@getctype#1{\expandafter\@ifundefined{tseg@ctype@#1}{\ifcat#1.%
\ifx#1\tseg@num@ N\else%
\ifx#1\tseg@num@i N\else%
\ifx#1\tseg@num@ii N\else%
\ifx#1\tseg@num@iii N\else%
\ifx#1\tseg@num@iv N\else%
\ifx#1\tseg@num@v N\else%
\ifx#1\tseg@num@vi N\else%
\ifx#1\tseg@num@vii N\else%
\ifx#1\tseg@num@viii N\else%
\ifx#1\tseg@num@ix N\else%
O\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi%
\else H\fi}{\csname tseg@ctype@#1\endcsname}}
\newcounter{tseg@score}

% the model of TinySegmenter
__MODEL__

\def\tseg@do#1#2{\expandafter\@ifundefined{tseg@#1@#2}{}{\addtocounter{tseg@score}{\csname tseg@#1@#2\endcsname}}}

\def\TinySegmenter#1#2{%
\def\tseg@Bn{Bn}%
\def\tseg@segmiv{Bn}%
\def\tseg@segmiii{Bn}%
\def\tseg@segmii{Bn}%
\def\tseg@segmi{Bn}%
\def\tseg@seg{Bn}%
\def\tseg@segi{Biii}%
\def\tseg@segii{Bii}%
\def\tseg@segiii{Bi}%
\def\tseg@pi{U}%
\def\tseg@pii{U}%
\def\tseg@piii{U}%
\@tfor\member:=#2{Ei}{Eii}{Eiii}\do{%
\let\tseg@segmiv\tseg@segmiii%
\let\tseg@segmiii\tseg@segmii%
\let\tseg@segmii\tseg@segmi%
\let\tseg@segmi\tseg@seg%
\let\tseg@seg\tseg@segi%
\let\tseg@segi\tseg@segii%
\let\tseg@segii\tseg@segiii%
\let\tseg@segiii\member%
\ifx\tseg@segmiv\tseg@Bn%
\ifx\tseg@segmiii\tseg@Bn\else\tseg@seg\fi\else%
\edef\tseg@ctypemiii{\tseg@getctype\tseg@segmiii}%
\edef\tseg@ctypemii{\tseg@getctype\tseg@segmii}%
\edef\tseg@ctypemi{\tseg@getctype\tseg@segmi}%
\edef\tseg@ctype{\tseg@getctype\tseg@seg}%
\edef\tseg@ctypei{\tseg@getctype\tseg@segi}%
\edef\tseg@ctypeii{\tseg@getctype\tseg@segii}%
\setcounter{tseg@score}{__BIAS__}%
\tseg@do{UPi}{\tseg@pi}%
\tseg@do{UPii}{\tseg@pii}%
\tseg@do{UPiii}{\tseg@piii}%
\tseg@do{BPi}{\tseg@pi\tseg@pii}%
\tseg@do{BPii}{\tseg@pii\tseg@piii}%
\tseg@do{UWi}{\tseg@segmiii}%
\tseg@do{UWii}{\tseg@segmii}%
\tseg@do{UWiii}{\tseg@segmi}%
\tseg@do{UWiv}{\tseg@seg}%
\tseg@do{UWv}{\tseg@segi}%
\tseg@do{UWvi}{\tseg@segii}%
\tseg@do{BWi}{\tseg@segmii\tseg@segmi}%
\tseg@do{BWii}{\tseg@segmi\tseg@seg}%
\tseg@do{BWiii}{\tseg@seg\tseg@segi}%
\tseg@do{TWi}{\tseg@segmiii\tseg@segmii\tseg@segmi}%
\tseg@do{TWii}{\tseg@segmii\tseg@segmi\tseg@seg}%
\tseg@do{TWiii}{\tseg@segmi\tseg@seg\tseg@segi}%
\tseg@do{TWiv}{\tseg@seg\tseg@segi\tseg@segii}%
\tseg@do{UCi}{\tseg@ctypemiii}%
\tseg@do{UCii}{\tseg@ctypemii}%
\tseg@do{UCiii}{\tseg@ctypemi}%
\tseg@do{UCiv}{\tseg@ctype}%
\tseg@do{UCv}{\tseg@ctypei}%
\tseg@do{UCvi}{\tseg@ctypeii}%
\tseg@do{BCi}{\tseg@ctypemii\tseg@ctypemi}%
\tseg@do{BCii}{\tseg@ctypemi\tseg@ctype}%
\tseg@do{BCiii}{\tseg@ctype\tseg@ctypei}%
\tseg@do{TCi}{\tseg@ctypemiii\tseg@ctypemii\tseg@ctypemi}%
\tseg@do{TCii}{\tseg@ctypemii\tseg@ctypemi\tseg@ctype}%
\tseg@do{TCiii}{\tseg@ctypemi\tseg@ctype\tseg@ctypei}%
\tseg@do{TCiv}{\tseg@ctype\tseg@ctypei\tseg@ctypeii}%
\tseg@do{UQi}{\tseg@pi\tseg@ctypemiii}%
\tseg@do{UQii}{\tseg@pii\tseg@ctypemii}%
\tseg@do{UQiii}{\tseg@piii\tseg@ctypemi}%
\tseg@do{BQi}{\tseg@pii\tseg@ctypemii\tseg@ctypemi}%
\tseg@do{BQii}{\tseg@pii\tseg@ctypemi\tseg@ctype}%
\tseg@do{BQiii}{\tseg@piii\tseg@ctypemii\tseg@ctypemi}%
\tseg@do{BQiv}{\tseg@piii\tseg@ctypemi\tseg@ctype}%
\tseg@do{TQi}{\tseg@pii\tseg@ctypemiii\tseg@ctypemii\tseg@ctypemi}%
\tseg@do{TQii}{\tseg@pii\tseg@ctypemii\tseg@ctypemi\tseg@ctype}%
\tseg@do{TQiii}{\tseg@piii\tseg@ctypemiii\tseg@ctypemii\tseg@ctypemi}%
\tseg@do{TQiv}{\tseg@piii\tseg@ctypemii\tseg@ctypemi\tseg@ctype}%
\let\tseg@pi\tseg@pii%
\let\tseg@pii\tseg@piii%
\ifnum\c@tseg@score>0 #1\def\tseg@piii{B}\else\def\tseg@piii{O}\fi%
\tseg@seg\fi}}
